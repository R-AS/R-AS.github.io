{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/blogs/interview-浏览器/browser_4/","result":{"data":{"markdownRemark":{"fileAbsolutePath":"/Users/zhengjinyang/Documents/study/R-AS.github.io/src/pages/blogs/interview-浏览器/browser_4.md","html":"<div class=\"toc\">\n<ul>\n<li><a href=\"#%E9%87%8D%E6%8E%92%E5%9B%9E%E6%B5%81%E4%B8%8E%E9%87%8D%E7%BB%98%E7%9A%84%E5%8C%BA%E5%88%AB\">重排(回流)与重绘的区别</a></li>\n<li><a href=\"#%E8%A7%A6%E5%8F%91%E9%87%8D%E6%8E%92%E5%9B%9E%E6%B5%81%E5%92%8C%E9%87%8D%E7%BB%98\">触发重排(回流)和重绘？</a></li>\n<li><a href=\"#%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E9%87%8D%E7%BB%98%E6%88%96%E9%87%8D%E6%8E%92\">如何避免重绘或重排？</a></li>\n</ul>\n</div>\n<hr>\n<h4 id=\"重排回流与重绘的区别\">重排(回流)与重绘的区别</h4>\n<ul>\n<li>重排/回流（reflow）：当 DOM 的变化影响了元素的几何信息，浏览器需要重新计算元素的几何属性，将其安放在界面中的正确位置，这个过程叫做重排。表现为重新生成布局，重新排列元素。</li>\n<li>重绘（repaint）：当一个元素的外观发生改变，但没有改变布局，重新把元素外观绘制出来的过程，叫做重绘。表现为某些元素的外观被改变。</li>\n</ul>\n<p><strong><font color=#f0764c>重绘 不一定会出现 重排，重排 必然会出现 重绘。</font></strong></p>\n<hr>\n<h4 id=\"触发重排回流和重绘\">触发重排(回流)和重绘？</h4>\n<p>任何改变用来构建渲染树的信息都会导致一次重排或重绘：</p>\n<ul>\n<li>添加、删除、更新 DOM 节点</li>\n<li>通过 display: none 隐藏一个 DOM 节点（触发重排和重绘）</li>\n<li>通过 visibility: hidden 隐藏一个 DOM 节点（只触发重绘）</li>\n<li>移动或给页面中的 DOM 节点添加动画</li>\n<li>添加一个样式表，调整样式属性</li>\n<li>用户行为，例如调整窗口大小、改变字号，或者滚动</li>\n</ul>\n<hr>\n<h4 id=\"如何避免重绘或重排\">如何避免重绘或重排？</h4>\n<ul>\n<li>集中改变样式，不要一条条地改变 DOM 的样式</li>\n<li>不要把 DOM 结点的属性值放在循环里当成循环里的变量</li>\n<li>为动画的 HTML 元件使用 fixed 或 absoult 的 position，那么修改他们的 CSS 是不会 reflow 的</li>\n<li>不使用 table 布局。因为可能很小的一个小改动会造成整个 table 的重新布局</li>\n<li>尽量只修改position：absolute或fixed元素，对其他元素影响不大</li>\n<li>动画开始GPU加速，translate使用3D变化</li>\n<li>\n<p>提升为合成层</p>\n<ul>\n<li>\n<p>将元素提升为合成层有以下优点：</p>\n<ul>\n<li>合成层的位图，会交由 GPU 合成，比 CPU 处理要快</li>\n<li>当需要 repaint 时，只需要 repaint 本身，不会影响到其他的层</li>\n<li>对于 transform 和 opacity 效果，不会触发 layout 和 paint</li>\n</ul>\n</li>\n<li>\n<p>提升合成层的最好方式是使用 CSS 的 will-change 属性：</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"41195955140100820000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyToasterText\"\n              data-toaster-text=\"copy successfully!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`#target {\nwill-change: transform;\n}`, `41195955140100820000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButton\"\n                data-tooltip=\"\"\n              >\n                copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"css\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"mtk6\">#target</span><span class=\"mtk1\"> {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk12\">will-change</span><span class=\"mtk1\">: transform;</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}</span></span></code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<p><strong>摘抄自：</strong></p>\n<ul>\n<li><a href=\"https://juejin.cn/post/7016593221815910408#heading-13\">🔥 连八股文都不懂还指望在前端混下去么</a></li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n  }\n  \n  .grvsc-code {\n    display: inline-block;\n    min-width: 100%;\n  }\n  \n  .grvsc-line {\n    display: inline-block;\n    box-sizing: border-box;\n    width: 100%;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-line-highlighted {\n    background-color: var(--grvsc-line-highlighted-background-color, transparent);\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, transparent);\n  }\n  \n  .dark-default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .dark-default-dark .mtk6 { color: #D7BA7D; }\n  .dark-default-dark .mtk1 { color: #D4D4D4; }\n  .dark-default-dark .mtk12 { color: #9CDCFE; }\n</style>","frontmatter":{"title":"重排(回流)与重绘","date":"2022-10-20","type":"interview-浏览器"},"excerpt":"重排(回流)与重绘的区别 触发重排(回流)和重绘？ 如何避免重绘或重排？重排(回流)与重绘的区别 重排/回流（reflow）：当 DOM…","fields":{"readingTime":{"text":"3 min read"}}},"allDirectory":{"totalCount":14,"edges":[{"node":{"base":"css"}},{"node":{"base":"frontend"}},{"node":{"base":"interview-css"}},{"node":{"base":"interview-javascript"}},{"node":{"base":"interview-浏览器"}},{"node":{"base":"interview-计算机基础"}},{"node":{"base":"javascript"}},{"node":{"base":"nodejs"}},{"node":{"base":"react"}},{"node":{"base":"redux-tool-kit"}},{"node":{"base":"typescript"}},{"node":{"base":"vue"}},{"node":{"base":"小程序"}},{"node":{"base":"科普"}}]}},"pageContext":{"slug":"/interview-浏览器/browser_4/"}},"staticQueryHashes":["1487620982","3141419394","3649515864"]}