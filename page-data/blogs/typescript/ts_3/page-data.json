{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/blogs/typescript/ts_3/","result":{"data":{"markdownRemark":{"fileAbsolutePath":"D:/study/R-AS.github.io/src/pages/blogs/typescript/ts_3.md","html":"<!-- ```toc\n``` -->\n<hr>\n<p><strong>DRY —— Don't repeat yourself</strong>, 以下记录在 typescript 开发中有那些可以提取出公共逻辑：</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"10402928339333894000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyToasterText\"\n              data-toaster-text=\"copy successfully!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`function distance(a: {x: number, y: number}, b: {x: number, y: number}) {\n  return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2))\n}`, `10402928339333894000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButton\"\n                data-tooltip=\"\"\n              >\n                copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">distance</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">: {</span><span class=\"mtk12\">x</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">, </span><span class=\"mtk12\">y</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">}, </span><span class=\"mtk12\">b</span><span class=\"mtk1\">: {</span><span class=\"mtk12\">x</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">, </span><span class=\"mtk12\">y</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span><span class=\"mtk1\">}) {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">sqrt</span><span class=\"mtk1\">(</span><span class=\"mtk10\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">pow</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">b</span><span class=\"mtk1\">.</span><span class=\"mtk12\">x</span><span class=\"mtk1\">, </span><span class=\"mtk7\">2</span><span class=\"mtk1\">) + </span><span class=\"mtk10\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk11\">pow</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\"> - </span><span class=\"mtk12\">b</span><span class=\"mtk1\">.</span><span class=\"mtk12\">y</span><span class=\"mtk1\">, </span><span class=\"mtk7\">2</span><span class=\"mtk1\">))</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>从以上代码可以发现，重复使用了 <strong>{x:number, y: number}</strong> 来定义 a 和 b 的类型，因此我们可以定义一个接口 Point2D 接口：</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"33180589404393500000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyToasterText\"\n              data-toaster-text=\"copy successfully!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`interface Point2D {\n  x: number\n  y: number\n}\n\nfunction distance(a: Point2D, b: Point2D) {/*...*/}`, `33180589404393500000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButton\"\n                data-tooltip=\"\"\n              >\n                copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"mtk4\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Point2D</span><span class=\"mtk1\"> {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">x</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">y</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"grvsc-line\"></span>\n<span class=\"grvsc-line\"><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">distance</span><span class=\"mtk1\">(</span><span class=\"mtk12\">a</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Point2D</span><span class=\"mtk1\">, </span><span class=\"mtk12\">b</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Point2D</span><span class=\"mtk1\">) {</span><span class=\"mtk3\">/*...*/</span><span class=\"mtk1\">}</span></span></code></pre>\n<p>然而在实际开发中，重复的类型有可能会被语法所覆盖，导致不容易被发现。例如：</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"35649527100750290000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyToasterText\"\n              data-toaster-text=\"copy successfully!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`function get(url: string, opts: Options): Promise<Response> {/*...*/}\nfunction post(url: string, opts: Options): Promise<Response> {/*...*/}`, `35649527100750290000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButton\"\n                data-tooltip=\"\"\n              >\n                copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk12\">url</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span><span class=\"mtk1\">, </span><span class=\"mtk12\">opts</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Options</span><span class=\"mtk1\">): </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Response</span><span class=\"mtk1\">&gt; {</span><span class=\"mtk3\">/*...*/</span><span class=\"mtk1\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">post</span><span class=\"mtk1\">(</span><span class=\"mtk12\">url</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span><span class=\"mtk1\">, </span><span class=\"mtk12\">opts</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Options</span><span class=\"mtk1\">): </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Response</span><span class=\"mtk1\">&gt; {</span><span class=\"mtk3\">/*...*/</span><span class=\"mtk1\">}</span></span></code></pre>\n<p>对于上面的 get 和 post 方法，为了避免重复的代码，可以提取统一的类型签名：</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"48529654161778614000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyToasterText\"\n              data-toaster-text=\"copy successfully!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`type HTTPFunction = (url: string, opts: Options) => Promise<Response>\n\nconst get: HTTPFunction = (url, opts) => {/*...*/}\nconst post: HTTPFunction = (url, opts) => {/*...*/}`, `48529654161778614000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButton\"\n                data-tooltip=\"\"\n              >\n                copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"mtk4\">type</span><span class=\"mtk1\"> </span><span class=\"mtk10\">HTTPFunction</span><span class=\"mtk1\"> = (</span><span class=\"mtk12\">url</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span><span class=\"mtk1\">, </span><span class=\"mtk12\">opts</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Options</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Response</span><span class=\"mtk1\">&gt;</span></span>\n<span class=\"grvsc-line\"></span>\n<span class=\"grvsc-line\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">get</span><span class=\"mtk1\">: </span><span class=\"mtk10\">HTTPFunction</span><span class=\"mtk1\"> = (</span><span class=\"mtk12\">url</span><span class=\"mtk1\">, </span><span class=\"mtk12\">opts</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span><span class=\"mtk3\">/*...*/</span><span class=\"mtk1\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">post</span><span class=\"mtk1\">: </span><span class=\"mtk10\">HTTPFunction</span><span class=\"mtk1\"> = (</span><span class=\"mtk12\">url</span><span class=\"mtk1\">, </span><span class=\"mtk12\">opts</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span><span class=\"mtk3\">/*...*/</span><span class=\"mtk1\">}</span></span></code></pre>\n<hr>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"50631399773369970000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyToasterText\"\n              data-toaster-text=\"copy successfully!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`interface Person {\n  firstName: string\n  lastName: string\n}\n\ninterface PersonWithBirthDate {\n  firstName: string\n  lastName: string\n  birth: Date\n}`, `50631399773369970000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButton\"\n                data-tooltip=\"\"\n              >\n                copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"mtk4\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Person</span><span class=\"mtk1\"> {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">firstName</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">lastName</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"grvsc-line\"></span>\n<span class=\"grvsc-line\"><span class=\"mtk4\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk10\">PersonWithBirthDate</span><span class=\"mtk1\"> {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">firstName</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">lastName</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">birth</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Date</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>上面例子中 <strong>PersonWithBirthDate</strong> 相对于 <strong>Person</strong> 来说只多了一个 <strong>birth</strong> 属性，其他属性相同，那我们可以这样改造：</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"67210928429003020000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyToasterText\"\n              data-toaster-text=\"copy successfully!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`interface Person {\n  firstName: string\n  lastName: string\n}\ninterface PersonWithBirthDate extends Person {\n  birthDate\n}\n// 或者\ntype PersonWithBirthDate = Person & { birth: Date }`, `67210928429003020000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButton\"\n                data-tooltip=\"\"\n              >\n                copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"mtk4\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Person</span><span class=\"mtk1\"> {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">firstName</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">lastName</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk4\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk10\">PersonWithBirthDate</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Person</span><span class=\"mtk1\"> {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">birthDate</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk3\">// 或者</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk4\">type</span><span class=\"mtk1\"> </span><span class=\"mtk10\">PersonWithBirthDate</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">Person</span><span class=\"mtk1\"> & { </span><span class=\"mtk12\">birth</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Date</span><span class=\"mtk1\"> }</span></span></code></pre>\n<hr>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"46258728019638590000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyToasterText\"\n              data-toaster-text=\"copy successfully!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`interface State {\n  userId: string\n  pageTitle: string\n  recentFiles: string[]\n  pageContents: string\n}\ninterface TopNavState {\n  userId: string\n  pageTitle: string\n  recentFiles: string[]\n}`, `46258728019638590000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButton\"\n                data-tooltip=\"\"\n              >\n                copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"mtk4\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk10\">State</span><span class=\"mtk1\"> {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">userId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">pageTitle</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">recentFiles</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span><span class=\"mtk1\">[]</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">pageContents</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk4\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk10\">TopNavState</span><span class=\"mtk1\"> {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">userId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">pageTitle</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">recentFiles</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span><span class=\"mtk1\">[]</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>以上例子中 <strong>TopNavState</strong> 相比 <strong>State</strong> 只是缺少了 <strong>pageContents</strong> 属性，但我们却重复声明其他三个相同的属性。那可以这样做：</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"60027638253927560000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyToasterText\"\n              data-toaster-text=\"copy successfully!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`type TopNavState = {\n  userId: State['userId']\n  pageTitle: State['pageTitle']\n  recentFiles: State['recentFiles']\n}\n// 或者\ntype TopNavState = {\n  [k in 'userId' | 'pageTitle' | 'recentFiles']: State[k]\n}\n// 或者\ntype TopNavState = Pick<State, 'userId', 'pageTitle', 'recentFiles'>`, `60027638253927560000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButton\"\n                data-tooltip=\"\"\n              >\n                copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"mtk4\">type</span><span class=\"mtk1\"> </span><span class=\"mtk10\">TopNavState</span><span class=\"mtk1\"> = {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">userId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">State</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;userId&#39;</span><span class=\"mtk1\">]</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">pageTitle</span><span class=\"mtk1\">: </span><span class=\"mtk10\">State</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;pageTitle&#39;</span><span class=\"mtk1\">]</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">recentFiles</span><span class=\"mtk1\">: </span><span class=\"mtk10\">State</span><span class=\"mtk1\">[</span><span class=\"mtk8\">&#39;recentFiles&#39;</span><span class=\"mtk1\">]</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk3\">// 或者</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk4\">type</span><span class=\"mtk1\"> </span><span class=\"mtk10\">TopNavState</span><span class=\"mtk1\"> = {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  [</span><span class=\"mtk10\">k</span><span class=\"mtk1\"> </span><span class=\"mtk4\">in</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;userId&#39;</span><span class=\"mtk1\"> | </span><span class=\"mtk8\">&#39;pageTitle&#39;</span><span class=\"mtk1\"> | </span><span class=\"mtk8\">&#39;recentFiles&#39;</span><span class=\"mtk1\">]: </span><span class=\"mtk10\">State</span><span class=\"mtk1\">[</span><span class=\"mtk10\">k</span><span class=\"mtk1\">]</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk3\">// 或者</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk4\">type</span><span class=\"mtk1\"> </span><span class=\"mtk10\">TopNavState</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">Pick</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">State</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;userId&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;pageTitle&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;recentFiles&#39;</span><span class=\"mtk1\">&gt;</span></span></code></pre>\n<hr>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"75934710243619230000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyToasterText\"\n              data-toaster-text=\"copy successfully!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`interface Options {\n  width: number\n  height: number\n  color: string\n  label: string\n}\n\ninterface OptionsUpdate {\n  width?: number\n  height?: number\n  color?: string\n  label?: string\n}`, `75934710243619230000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButton\"\n                data-tooltip=\"\"\n              >\n                copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"mtk4\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Options</span><span class=\"mtk1\"> {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">width</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">height</span><span class=\"mtk1\">: </span><span class=\"mtk10\">number</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">color</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">label</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}</span></span>\n<span class=\"grvsc-line\"></span>\n<span class=\"grvsc-line\"><span class=\"mtk4\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk10\">OptionsUpdate</span><span class=\"mtk1\"> {</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">width</span><span class=\"mtk1\">?: </span><span class=\"mtk10\">number</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">height</span><span class=\"mtk1\">?: </span><span class=\"mtk10\">number</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">color</span><span class=\"mtk1\">?: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">  </span><span class=\"mtk12\">label</span><span class=\"mtk1\">?: </span><span class=\"mtk10\">string</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk1\">}</span></span></code></pre>\n<p>改造：</p>\n<div\n              class=\"gatsby-code-button-container\"\n              data-toaster-id=\"53940270182149180000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyToasterText\"\n              data-toaster-text=\"copy successfully!\"\n              data-toaster-duration=\"5000\"\n              onClick=\"copyToClipboard(`type OptionsUpdate = {[k in keyof Options]?: Options[k]}\n// 或者\ntype OptionsUpdate = Partial<OptionsUpdate>`, `53940270182149180000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButton\"\n                data-tooltip=\"\"\n              >\n                copy<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"typescript\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"mtk4\">type</span><span class=\"mtk1\"> </span><span class=\"mtk10\">OptionsUpdate</span><span class=\"mtk1\"> = {[</span><span class=\"mtk10\">k</span><span class=\"mtk1\"> </span><span class=\"mtk4\">in</span><span class=\"mtk1\"> </span><span class=\"mtk4\">keyof</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Options</span><span class=\"mtk1\">]?: </span><span class=\"mtk10\">Options</span><span class=\"mtk1\">[</span><span class=\"mtk10\">k</span><span class=\"mtk1\">]}</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk3\">// 或者</span></span>\n<span class=\"grvsc-line\"><span class=\"mtk4\">type</span><span class=\"mtk1\"> </span><span class=\"mtk10\">OptionsUpdate</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">Partial</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">OptionsUpdate</span><span class=\"mtk1\">&gt;</span></span></code></pre>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n  }\n  \n  .grvsc-code {\n    display: inline-block;\n    min-width: 100%;\n  }\n  \n  .grvsc-line {\n    display: inline-block;\n    box-sizing: border-box;\n    width: 100%;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-line-highlighted {\n    background-color: var(--grvsc-line-highlighted-background-color, transparent);\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, transparent);\n  }\n  \n  .dark-default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .dark-default-dark .mtk4 { color: #569CD6; }\n  .dark-default-dark .mtk1 { color: #D4D4D4; }\n  .dark-default-dark .mtk11 { color: #DCDCAA; }\n  .dark-default-dark .mtk12 { color: #9CDCFE; }\n  .dark-default-dark .mtk10 { color: #4EC9B0; }\n  .dark-default-dark .mtk15 { color: #C586C0; }\n  .dark-default-dark .mtk7 { color: #B5CEA8; }\n  .dark-default-dark .mtk3 { color: #6A9955; }\n  .dark-default-dark .mtk8 { color: #CE9178; }\n</style>","frontmatter":{"title":"Typescript记录 —— 减少重复代码","date":"2021-02-23","type":"typescript"},"excerpt":"DRY —— Don't repeat yourself, 以下记录在 typescript 开发中有那些可以提取出公共逻辑： 从以上代码可以发现，重复使用了 {x:number, y: number} 来定义 a 和 b 的类型，因此我们可以定义一个接口 Point2D…","fields":{"readingTime":{"text":"2 min read"}}},"allDirectory":{"totalCount":10,"edges":[{"node":{"base":"css"}},{"node":{"base":"javascript"}},{"node":{"base":"frontend"}},{"node":{"base":"react"}},{"node":{"base":"vue"}},{"node":{"base":"redux-tool-kit"}},{"node":{"base":"nodejs"}},{"node":{"base":"科普"}},{"node":{"base":"typescript"}},{"node":{"base":"小程序"}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/typescript/ts_3/"}}}