---
title: '正则表达式'
date: '2021-10-07'
thumbnail: 'javascript/index.png'
type: 'javascript'
---
```toc
```
---

### 正则表达式的组成

- 普通字符 abc 中国 123 等
- 特殊字符（元字符、限定符、中括号）：正则表达式中有特殊意义等字符
---

### 元字符

元字符就是在正则表达式中具有特殊含义的字符

| 元字符 | 说明 |
| :- | :- |
| \d | 匹配数字 |
| \D | 匹配非数字 |
| \w | 匹配字母或数字或下划线_ |
| \W | 匹配非字母、数字、下划线_ |
| \s | 匹配空白符（空格） |
| \S | 匹配非空白符 |
| . | 匹配任意除了换行符（回车键）之外的单个字符 |

---

### 限定符

限定符就是控制字符出现的次数，对字符个数限制

| 限定符 | 说明 |
| :- | :- |
| n* | 匹配任何包含零个或者多个n的字符串。n{0,} |
| n+ | 匹配任何包含至少一个n的字符串。n{1,} |
| n? | 匹配任何包含零个或一个n的字符串。{0,1} |
| n{x} | 匹配包含x个n的序列的字符串。 |
| n{x,} | 匹配包含至少x个n的序列的字符串。 |
| n{x,y} | 匹配包含至少x个至多y个n的序列的字符串。 |
| n$ | 匹配任何结尾为n的字符串。 |
| ^n | 匹配任何开头为n的字符串。 |

**注意**
1. 正则表达式使用时，会对字符串整体校验，完全符合才能够匹配。否则不匹配。
2. 针对花括号中次数限制，在去匹配字符串时，首先是从前先后匹配，先按照至多次数匹配，若至多不符合要求，则再按照较少的匹配。
3. 针对花括号中次数限制至少是0时，此时若字符串中没有匹配的项是符合要求的，若字符串中的字符不匹配也是符合要求的。

---

### 中括号

一个中括号就代表一个字符串，中括号的目的解视控制一个字符的范围。

| 中括号 | 说明 |
| :- | :- |
| [abc] | 查找一个括号之间的任何字符。 |
| [^abc] | 查找一个任何不在方括号之间的字符，^在中括号中有取反的意思。 |
| [0-9] | 查找一个任何从0至9的数字。 |
| [a-z] | 查找一个任何从小写a到小写z的字符。 |
| [A-Z] | 查找一个任何从大写A到大写Z的字符。 |
| [A-z] | 查找一个字母（包含大小写和下划线）。 |
| [[\u4e00-\u9fa5]] | 查找一个汉字。 |

在匹配时，从前向后按照【规则】去找，若是全局匹配，前面若有满足项时，后面再匹配时，从满足项下一个开始匹配。

---

### 或模式

特殊符号：正则1|正则2, 或者。 符合或两边其中一个就可以匹配。

如：google，baidu，bing; // 匹配三种其中一种字符串

正则：google|baidu|bing

---

### 分组模式

特殊符号： (正则) ;

组指的是一个小集体，分组就是将一个大集体可以分成几个小集体。

如：控制你的名字连续出现的次数，最少1次，最多3次

正则：^(bruce){1,3}$

---

### 修饰符

- g，全称global，有 全局 的意思，表示全局匹配。 如： var reg = /hello/g;
- i，全称ignore，有 忽视、忽略 的意思，表示匹配字母时，可以忽略字母的大小写。 如： var reg = /hello/i;
- gi，全局匹配和忽略大小写一起使用。 如： var reg = /hello/gi;

---

### 正则转义符

在正则中表示特殊符号。去除.的特殊意义，需要转义： \.

---

### 练习题

**1. 用户名正则**
```js
// 用户名正则，4 - 16位（字母、数字、下划线、减号）
const reg = /^[\w-]{4,16}$/ // 或者 /^[a-zA-Z0-9-]{4,16}$/
reg.test('abcd123') // true
```

**2. 密码强度正则**
```js
// 密码强度正则，最少6位，包括至少1个大写字母，1个小写字母，1个数字，1个特殊字符
const reg = /^.*(?=.{6,})(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*?]).*$/
reg.test('Aa12345&*&') // true
```

**3. 整数正则**
```js
/^\d+$/ // 正整数正则
/^-\d+$/ // 负整数正则
/^-?\d+$/ // 整数正则
```

**4. 数字正则**

可以是整数也可以是浮点数
```js
// 整数正则
/^\d*\.?\d+$/
// 负数正则
/^-\d*\.?\d+$/
// 数字正则
/^-?\d*\.?\d+$/
```

**5. Email 正则**
```js
/^([\w-\.])+\@([\w-\.])+\.([A-Za-z]{2,4})$/ // 或者 /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/
```

**6. 手机号正则**
```js
/^1[34578]\d{9}$/
```

**7. 身份证号正则**
```js
/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/
```

**8. URL 正则**
```js
//身份证号（18位）正则
/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/
```

**9. IPv4地址正则**
```js
//ipv4地址正则
var ipP = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
//输出 true
console.log(ipP.test("115.28.47.26"));
```

**10. 十六进制颜色正则**
```js
//RGB Hex颜色正则
var cPattern = /^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/;
//输出 true
console.log(cPattern.test("#b8b8b8"));
```

**11. 日期正则**
```js
//日期正则，简单判定,未做月份及日期的判定
var dP1 = /^\d{4}(\-)\d{1,2}\1\d{1,2}$/;
//输出 true
console.log(dP1.test("2017-05-11"));
//输出 true
console.log(dP1.test("2017-15-11"));
//日期正则，复杂判定
var dP2 = /^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/;
//输出 true
console.log(dP2.test("2017-02-11"));
//输出 false
console.log(dP2.test("2017-15-11"));
//输出 false
console.log(dP2.test("2017-02-29"));

```
**12. QQ号码正则**
```js
//QQ号正则，5至11位
/^[1-9][0-9]{4,10}$/
```

**13. 微信号正则**
```js
//微信号正则，6至20位，以字母开头，字母，数字，减号，下划线
/^[a-zA-Z]([-_a-zA-Z0-9]{5,19})+$/
```

**14. 车牌号正则**
```js
/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]{1}[A-Z]{1}[A-Z0-9]{4}[A-Z0-9挂学警港澳]{1}$/
```
**15. 包含中文正则**
```js
/[\u4E00-\u9FA5]/
```